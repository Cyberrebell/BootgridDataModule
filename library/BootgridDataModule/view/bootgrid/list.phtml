<h2><?php echo $this->translate('list ' . $title); ?></h2>
<table id="grid-data-api" class="table table-condensed table-hover table-striped" data-toggle="bootgrid" data-ajax="true" data-url="/bootgrid-data/<?php echo strtolower($title) ?>">
	<thead>
		<tr>
			<?php foreach ($entityProperties as $propertyName): ?>
			<?php if ($propertyName == 'id'): ?>
            <th data-column-id="<?php echo $propertyName ?>" data-type="numeric" data-identifier="true">
                ID
            </th>
            <?php else: ?>
            <th data-column-id="<?php echo $propertyName ?>">
                <?php echo $this->translate($propertyName); ?>
            </th>
            <?php endif; ?>
            <?php endforeach; ?>
            <th class="crudlist-iconcol">
                <?php foreach ($listHeadIcons as $icon => $ref): ?>
                    <a title="<?php echo $this->translate($icon); ?>" class="<?php echo $icon; ?>-icon crudlist-icon" href="<?php echo $ref; ?>">
                        <span></span>
                    </a>
                <?php endforeach; ?>
            </th>
		</tr>
	</thead>
</table>

<?php $this->inlineScript()->captureStart();
echo <<<JS
$("#grid-data-api").bootgrid({
	post: function () {
		/* To accumulate custom parameter with the request object */
		return {
			id: "b0df282a-0d67-40e5-8558-c9e93b7befed"
		};
	},
	selection: true,
	multiSelect: true,
	rowSelect: true,
	keepSelection: true,
	formatters: {
		"link": function(column, row)
		{
			return "<a href=\"#\">" + column.id + ": " + row.id + "</a>";
		}
	}
}).on("selected.rs.jquery.bootgrid", function(e, rows) {
	var rowIds = [];
	for (var i = 0; i < rows.length; i++) {
		rowIds.push(rows[i].id);
	}
	alert("Select: " + rowIds.join(","));
}).on("deselected.rs.jquery.bootgrid", function(e, rows) {
	var rowIds = [];
	for (var i = 0; i < rows.length; i++) {
		rowIds.push(rows[i].id);
	}
	alert("Deselect: " + rowIds.join(","));
});
JS;
$this->inlineScript()->captureEnd();
